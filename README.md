Описание конфигураций NGINX

В репозитории находится 5 разных конфигураций для NGINX.
Каждый файл показывает отдельный тип настройки веб-сервера: статика, SSL, реверс-прокси, лимитирование запросов, логирование и балансировка нагрузки.

Ниже — краткое описание каждого файла.
------------------------------------------------------------------------------------
1. nginx.conf

Главный конфигурационный файл.
Через него подключаются остальные .conf-файлы (директива include).
В нём задаются общие параметры работы NGINX и базовая структура конфигурации.
-------------------------------------------------------------------------------------
2. static_site.conf

Настраивает отдачу статичных файлов.

Основные моменты:

root указывает директорию сайта

location / обслуживает корневые запросы

try_files пытается найти файл, иначе возвращает ошибку

Подходит для обычных HTML-страниц и статичных сайтов.
--------------------------------------------------------------------------------------
3. ssl_site.conf

Настройка HTTPS.

Что делает:

перенаправляет весь HTTP → HTTPS

подключает SSL-сертификаты

включает защищённое соединение

Это базовая конфигурация для сайта, который работает по HTTPS.
---------------------------------------------------------------------------------------
4. reverse_proxy.conf

Реверс-прокси.

Основное:

proxy_pass отправляет запросы на backend

proxy_set_header передаёт реальные заголовки клиента (IP, Host и т. д.)

Используется, когда NGINX стоит перед приложением (Node.js, Python, Go и др.).
---------------------------------------------------------------------------------------
5. rate_limit.conf

Ограничение количества запросов (rate limiting).

Как работает:

сохраняет IP клиентов в бинарном виде через $binary_remote_addr

ограничение — 5 запросов в секунду

burst 10 разрешает кратковременный всплеск до +10 запросов

С nodelay burst-запросы выполняются сразу, без ожидания.
Без nodelay они попадают в очередь и обрабатываются медленнее.
---------------------------------------------------------------------------------------
6. logging.conf

Настройка логирования.

Содержит два формата логов:

vhost — обычные запросы

downloads — отдельные логи для /downloads

Также используется:

open_log_file_cache — уменьшает нагрузку на диск

регулярное выражение в server_name

$1 — www

$2 — доменное имя

Особенность конфига:

создаёт общий лог

создаёт отдельный лог для каждого домена

создаёт отдельный лог для /downloads
----------------------------------------------------------------------------------------
7. balance.conf

Балансировка нагрузки.

Использует upstream c методом least_conn.


